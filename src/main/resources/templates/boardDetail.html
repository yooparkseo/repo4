<!DOCTYPE html>
<html th:lang="ko" xmlns:th="http://www.thymeleaf.org" xmlns:layout="http://www.ultraq.net.nz/thymeleaf/layout">
<head>
    <title>00ì—¬í–‰ì‚¬</title>
    <meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no"/>
    <link rel="shortcut icon" href="#">
    <noscript>
        <link rel="stylesheet" th:href="@{/css/noscript.css}"/>
    </noscript>
    <link rel="stylesheet" th:href="@{/css/main.css}"/>
    <link rel="stylesheet" th:href="@{/css/style.css}"/>
    <script th:src="@{https://code.jquery.com/jquery-3.6.0.min.js}"></script>
    <style>
        .col1 {
            width: 250px;
        }

        .col2 {
            display: flex;
            justify-content: left;
        }

        td {
            color: black;
        }

        td input[type='text'] {
            width: 80%;
            text-align: left;
        }

        td select {
            width: 80%;
        }
        td textarea{
            width: 100%;
            resize: none;
        }
    </style>
</head>
<body>
<header th:replace="layout/header :: headerFragment"></header>
<div layout:fragment="content">
    <div id="wrapper">
        <section id="content" class="main">
            <table class="table01">
                <caption>
                    <!-- ì „ì²´, ê³µì§€ì‚¬í•­, ê²Œì‹œíŒ ì¼ë•Œ êµ¬ë¶„ ì¶”ê°€ -->
                    <h2>ê³µì§€ì‚¬í•­ ìƒì„¸ë³´ê¸°</h2>
                </caption>
                <tr>
                    <td class="table-header">ìˆœë²ˆ</td>
                    <td class="table-header">ì œëª©</td>
                    <td class="table-header">ì‘ì„±ì</td>
                    <td class="table-header">ì‘ì„±ì¼</td>
                    <td class="table-header">ì¡°íšŒìˆ˜</td>
                    <td class="table-header">ë¹„ë°€ê¸€</td>
                </tr>
                <tr th:each="detail : ${board}">
                    <input type="hidden" id="type" th:value="${board.type}"/>
                    <td class="board-detail"><span th:text="${detail.boardId}"></span></td>
                    <td class="board-detail"><span th:text="${detail.title}" ></span></td>
                    <td class="board-detail"><span th:text="${detail.username}"></span></td>
                    <td class="board-detail post"><span class="created_at"
                                                        th:text="${#dates.format(detail.created_at, 'yyyy-MM-dd HH:mm:ss')}"></span>
                    </td>
                    <td class="board-detail"><span th:text="${detail.views}"></span></td>
                    <td class="board-detail">
                        <!-- 1ì´ë©´ ë¹„ë°€ê¸€ -->
                        <span th:if="${detail.isLocked == 1}">ğŸ”</span>
                    </td>
                </tr>
                <tr>
                   <td colspan="6" id="board-content">
                       <textarea th:text="${board.content}"></textarea>
                   </td>
                </tr>
            </table>
            <div style="display: flex; justify-content: center;">
                <!-- ì„¸ì…˜ì•„ì´ë””ë‘ ë¹„êµ -->
                <input type="button" class="button warn" value="ìˆ˜ì •í•˜ê¸°" onclick="">
                <input type="button" class="button danger" value="ì‚­ì œí•˜ê¸°" th:onclick="|deleteBoardDetail(${board.boardId})|">
            </div>
        </section>
    </div>
</div>
<footer th:replace="layout/footer :: footerFragment"></footer>
<script>
    function deleteBoardDetail(id) {
        console.log("boardId {}", id);
        let type = $('#type').val()
        $.ajax({
            url : '/deleteBoardDetail',
            data : { boardId : id },
            type : 'POST',
            success: function(result){
                alert('ì‚­ì œë˜ì—ˆìŠµë‹ˆë‹¤.');
                window.location.href = '/boardList?type='+type;
            },
            error: function(data) {
                console.error('ì‚­ì œì— ì‹¤íŒ¨í•˜ì˜€ìŠµë‹ˆë‹¤.')
            }
        });
    }
</script>
</body>
</html>
